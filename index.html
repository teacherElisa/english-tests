<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJ Mastery Hub - Elisa's Class</title>
    <style>
        :root { --primary: #4a90e2; --secondary: #f39c12; --bg: #f8fbfd; --success: #2ecc71; --error: #e74c3c; --text: #2c3e50; }
        body { font-family: 'Segoe UI', 'Comic Sans MS', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        .app-container { max-width: 950px; margin: 0 auto; background: white; padding: 25px; border-radius: 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); border: 5px solid var(--primary); }
        h1 { text-align: center; color: var(--primary); font-size: 2.2rem; margin-top: 0; text-shadow: 2px 2px 0px #eee; }
        .sections { display: flex; justify-content: center; gap: 12px; margin-bottom: 25px; flex-wrap: wrap; }
        .sec-btn { padding: 12px 20px; border: none; border-radius: 30px; cursor: pointer; font-weight: bold; background: #eee; font-size: 1rem; transition: 0.3s; }
        .sec-btn.active { background: var(--primary); color: white; transform: scale(1.05); }
        .sec-btn.dash { background: #9b59b6; color: white; }
        .exercise-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 25px; background: #f0f7ff; padding: 20px; border-radius: 20px; }
        .ex-btn { width: 45px; height: 45px; border: 2px solid var(--primary); background: white; border-radius: 50%; cursor: pointer; font-weight: bold; font-size: 1.1rem; }
        .ex-btn.active { background: var(--primary); color: white; }
        .ex-btn.done { background: var(--success); border-color: var(--success); color: white; }
        .question-card { margin-bottom: 25px; padding: 25px; border: 2px dashed #cbd5e0; border-radius: 20px; background: #fff; position: relative; }
        .q-text { font-size: 1.3rem; font-weight: bold; margin-bottom: 20px; }
        .options { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; }
        label { padding: 15px; border: 2px solid #edf2f7; border-radius: 15px; cursor: pointer; display: flex; align-items: center; gap: 12px; }
        .hint-btn { background: var(--secondary); color: white; border: none; padding: 6px 12px; border-radius: 12px; cursor: pointer; float: right; font-weight: bold; }
        .hint-box { display: none; background: #fff9db; padding: 15px; border-radius: 12px; margin-top: 15px; border-left: 6px solid var(--secondary); font-style: italic; }
        .btn-check { padding: 18px 50px; background: var(--success); color: white; border: none; border-radius: 50px; font-size: 1.4rem; font-weight: bold; cursor: pointer; width: 100%; box-shadow: 0 6px 0 #27ae60; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 20px; }
        .stat-card { padding: 20px; background: #f9f9f9; border-radius: 20px; border: 2px solid #eee; text-align: center; }
        .stat-card.good { background: #eafff2; border-color: var(--success); }
        #certificate { display: none; text-align: center; padding: 50px; border: 12px double var(--secondary); margin-top: 30px; border-radius: 30px; background: #fffef0; }
        .feedback { margin-top: 15px; font-weight: bold; display: none; }
    </style>
</head>
<body>

<div class="app-container">
    <h1>üá¨üáß AJ Mastery Hub - Elisa's Class</h1>
    <div class="sections">
        <button class="sec-btn active" id="sec-pronouns" onclick="changeSection('pronouns')">Pronouns (1-10)</button>
        <button class="sec-btn" id="sec-adverbs" onclick="changeSection('adverbs')">Adverbs (11-13)</button>
        <button class="sec-btn" id="sec-revision" onclick="changeSection('revision')">Revision (14-18)</button>
        <button class="sec-btn dash" onclick="showDashboard()">üìä My Progress</button>
    </div>

    <div id="exercise-nav" class="exercise-grid"></div>

    <div id="content-area">
        <div id="quiz-view"></div>
        <div id="check-btn-area" style="text-align:center;"><button class="btn-check" id="check-btn" onclick="checkEx()">Check My Answers! üåü</button></div>
    </div>

    <div id="dashboard-view" style="display:none;">
        <h2 style="text-align:center;">My Grammar Stars üåü</h2>
        <div class="dashboard-grid" id="dash-grid"></div>
        <div id="certificate">
            <h1 style="color:var(--secondary); font-size: 3rem;">üèÜ WELL DONE!</h1>
            <p id="total-score-text" style="font-size:1.4rem; font-weight:bold;"></p>
            <p>Take a photo and send it to Elisa! üì∏</p>
        </div>
    </div>
</div>

<script>
const allExercises = [
    { id: 1, section: 'pronouns', title: "Exercise 1: Pronouns", questions: [
        { t: "‚ÄúI would never lie to ________,‚Äù Marcus told John.", o: ["she", "you", "us", "he"], a: 1, h: "Marcus mluv√≠ p≈ô√≠mo k Johnovi. Kter√© z√°jmeno oslovuje druhou osobu (tebe)?" },
        { t: "Daniel, my brother, is more intelligent than ________.", o: ["me", "her", "mine", "I"], a: 3, h: "Zkus si vƒõtu doplnit v duchu: 'than ___ am'. Hledej podmƒõtn√Ω tvar." },
        { t: "You must attend classes if you want to learn how to make sushi ________.", o: ["herself", "yourself", "myself", "themselves"], a: 1, h: "Kdy≈æ ty (you) nƒõco dƒõl√°≈° s√°m, kter√© z√°jmeno na -self k tobƒõ pat≈ô√≠?" },
        { t: "I took a shortcut through the forest on ________ own even though it was dark.", o: ["my", "his", "our", "her"], a: 0, h: "Tato vazba vyjad≈ôuje samostatnost. Mus√≠ odpov√≠dat osobƒõ 'I' (j√°)." },
        { t: "After listening to what John had to say, the manager listened to ________ side of the story as well.", o: ["ours", "mine", "them", "my"], a: 3, h: "Mana≈æer si poslechl 'm≈Øj' p≈ô√≠bƒõh. Hledej p≈ôivlast≈àovac√≠ slovo pro osobu 'I'." },
        { t: "Ben and Joyce engaged a wedding planner to make ________ wedding a grand affair.", o: ["he", "mine", "their", "ours"], a: 2, h: "Svatba pat≈ô√≠ jim. Kter√© slovo znamen√° 'jejich'?" },
        { t: "The security guards tried to stop the shoplifter but she was too fast for ________.", o: ["her", "us", "him", "them"], a: 3, h: "Byla moc rychl√° pro 'nƒõ' (str√°≈æn√≠ky). Hledej p≈ôedmƒõtov√Ω tvar pro 'they'." },
        { t: "‚ÄúIf you do not come to a decision soon, ________ are going to sign up for the tour without you,‚Äù the twins told Marie.", o: ["we", "she", "you", "I"], a: 0, h: "Dvojƒçata mluv√≠ za sebe (my). Kter√© z√°jmeno zastupuje mluvƒç√≠ho a nƒõkoho dal≈°√≠ho?" },
        { t: "Alan and I completed the project ________ without any help from anyone.", o: ["themselves", "yourselves", "ourselves", "myself"], a: 2, h: "Kdy≈æ my (Alan a j√°) nƒõco udƒõl√°me sami, kter√© z√°jmeno na -selves pou≈æije≈°?" },
        { t: "The computer ________ is a useless machine unless there are good computer programmers around.", o: ["herself", "themselves", "yourself", "itself"], a: 3, h: "Poƒç√≠taƒç je vƒõc (it). Kter√© z√°jmeno oznaƒçuje vƒõc samotnou?" }
    ], score: null },

    { id: 2, section: 'pronouns', title: "Exercise 2: Pronouns", questions: [
        { t: "Colin encouraged his sister to talk to _______ whenever she had problems.", o: ["she", "they", "him", "I"], a: 2, h: "Sestra m√° mluvit s bratrem (s n√≠m). Hledej p≈ôedmƒõtov√Ω tvar pro 'he'." },
        { t: "Ben will meet Sandra and _______ in front of the library tomorrow.", o: ["I", "me", "he", "they"], a: 1, h: "Ben potk√° Sandru a mƒõ. Hledej p≈ôedmƒõtov√Ω tvar z√°jmena 'I'." },
        { t: "I got a free gift at the entrance of the zoo. Did you get _______?", o: ["mine", "her", "them", "yours"], a: 3, h: "Dostal jsi 'ten tv≈Øj'? Hledej samostatnƒõ stoj√≠c√≠ p≈ôivlast≈àovac√≠ z√°jmeno." },
        { t: "I do not play the violin. This violin is definitely not _______.", o: ["mine", "my", "hers", "his"], a: 0, h: "Nen√≠ 'moje'. Hledej tvar, kter√Ω nepot≈ôebuje podstatn√© jm√©no za sebou." },
        { t: "‚ÄúDo _______ want to watch a show with me?‚Äù Gerald asked Terry.", o: ["I", "you", "we", "them"], a: 1, h: "Gerald se pt√° p≈ô√≠mo. Jak oslov√≠≈° druhou osobu?" },
        { t: "‚ÄúPlease inform her _______ of the outing tomorrow,‚Äù Jack told Ben.", o: ["yourself", "himself", "herself", "themselves"], a: 0, h: "Jack chce, aby to Ben udƒõlal osobnƒõ. Pou≈æij tvar pro 'ty'." },
        { t: "Animals who cannot take care of their young _______ often leave them to die.", o: ["himself", "itself", "herself", "themselves"], a: 3, h: "Mluv√≠me o zv√≠≈ôatech (oni). Kter√© slovo na -selves vyjad≈ôuje 'sami'?" },
        { t: "You have to turn up at the immigration department _______ to collect your passport.", o: ["himself", "herself", "yourself", "ourselves"], a: 2, h: "Hledej z√°jmeno na -self, kter√© se shoduje s podmƒõtem 'You'." },
        { t: "‚ÄúIf Jack wants to know where you are, what do you want me to tell _______?‚Äù Samantha asked me.", o: ["her", "you", "him", "them"], a: 2, h: "Co m√°≈° ≈ô√≠ct Jackovi (jemu)? Hledej p≈ôedmƒõtov√Ω tvar pro 'he'." },
        { t: "Cheryl saved her pocket money so that she could pay for the new dress _______.", o: ["itself", "herself", "themselves", "himself"], a: 1, h: "Cheryl je d√≠vka (ona). Zaplatila si to 'sama'." }
    ], score: null },

    { id: 3, section: 'pronouns', title: "Exercise 3: Pronouns", questions: [
        { t: "The lady ________ I was speaking to was a reporter.", o: ["who", "whose", "whom", "which"], a: 2, h: "Koho jsi oslovil (p≈ôedmƒõt)? U osob v t√©to roli pou≈æij 'whom'." },
        { t: "The creature ________ you saw was a jellyfish.", o: ["which", "who", "whom", "whose"], a: 0, h: "Kter√© vzta≈æn√© z√°jmeno pat≈ô√≠ ke zv√≠≈ôat≈Øm a vƒõcem?" },
        { t: "Josephine and I apologized to Karen but she refused to listen to ________.", o: ["them", "you", "we", "us"], a: 3, h: "Odm√≠tla poslouchat 'n√°s'. Hledej p≈ôedmƒõtov√Ω tvar pro 'we'." },
        { t: "Jeremy and I were cycling when a dog ran towards ________.", o: ["them", "us", "theirs", "her"], a: 1, h: "Pes bƒõ≈æel k 'n√°m'. Hledej p≈ôedmƒõtov√Ω tvar z√°jmena 'we'." },
        { t: "Seeing how sad ________ was, I went over to comfort her.", o: ["he", "it", "she", "I"], a: 2, h: "≈†el jsi utƒõ≈°it 'ji', proto≈æe smutn√° byla 'ona'." },
        { t: "Please return ________ library books on time.", o: ["your", "he", "hers", "mine"], a: 0, h: "Vra≈• 'tvoje' knihy. Hledej p≈ôivlast≈àovac√≠ slovo stoj√≠c√≠ p≈ôed vƒõc√≠." },
        { t: "My mother will take Cindy and ________ to the swimming complex.", o: ["I", "me", "he", "they"], a: 1, h: "Maminka vezme mƒõ. Hledej p≈ôedmƒõtov√Ω tvar pro 'I'." },
        { t: "The student ________ writes the best story will represent the school.", o: ["which", "who", "whom", "whose"], a: 1, h: "Mluv√≠me o osobƒõ, kter√° (kdo) dƒõl√° tu akci." },
        { t: "My uncle spent more than ten years of ________ life living among the Bushmen.", o: ["her", "their", "our", "his"], a: 3, h: "Jeho (str√Ωc≈Øv) ≈æivot. Kter√© slovo pat≈ô√≠ k mu≈æi?" },
        { t: "‚ÄúDo help ________ to the drinks,‚Äù Mrs Carroll told her guests.", o: ["yourself", "ourselves", "themselves", "yourselves"], a: 3, h: "Mluv√≠ k v√≠ce host≈Øm. Nab√≠dnƒõte si 'sami' (vy v≈°ichni)." }
    ], score: null },

    { id: 4, section: 'pronouns', title: "Exercise 4: Pronouns", questions: [
        { t: "The driver ________ was responsible for the accident is in custody.", o: ["whose", "whom", "which", "who"], a: 3, h: "Hled√°≈° osobu, kter√° (kdo) je za nƒõco zodpovƒõdn√°." },
        { t: "Elephants are mammals which give birth to ________ young alive.", o: ["its", "them", "their", "our"], a: 2, h: "Ml√°ƒèata pat≈ô√≠ jim. Kter√© slovo vyjad≈ôuje 'jejich'?" },
        { t: "Once this statue is completed, ________ will be the tallest.", o: ["they", "it", "we", "you"], a: 1, h: "Socha je vƒõc (to). Kter√Ωm z√°jmenem ji nahrad√≠≈°?" },
        { t: "Everyone cheered until ________ were hoarse.", o: ["he", "they", "we", "you"], a: 1, h: "Po slovƒõ 'everyone' (v≈°ichni) se v angliƒçtinƒõ pou≈æ√≠v√° z√°jmeno pro mno≈æn√© ƒç√≠slo." },
        { t: "‚ÄúHave you seen ________ file? I left it here a few minutes ago,‚Äù said Joyce.", o: ["mine", "yours", "hers", "my"], a: 3, h: "Joyce hled√° 'svoji' slo≈æku. Hledej slovo p≈ôed podstatn√Ωm jm√©nem." },
        { t: "The foreman is a person ________ job is to take charge.", o: ["who", "whose", "which", "whom"], a: 1, h: "Hled√°≈° slovo 'jeho≈æ' (pr√°ce toho ƒçlovƒõka)." },
        { t: "Those ________ entered the contest will have a chance of winning.", o: ["who", "whom", "which", "whose"], a: 0, h: "Ti (lid√©), kte≈ô√≠ (kdo) se p≈ôihl√°sili." },
        { t: "Did you keep the letter ________ the school sent you?", o: ["who", "whose", "which", "whom"], a: 2, h: "Dopis je vƒõc. Kter√© vzta≈æn√© z√°jmeno k vƒõcem pat≈ô√≠?" },
        { t: "Mrs Leroy gave both of ________ a prize.", o: ["them", "her", "us", "you"], a: 2, h: "Dala cenu 'n√°m'. Hledej p≈ôedmƒõtov√Ω tvar pro 'we'." },
        { t: "Shirley took it upon ________ to take care of her sisters.", o: ["myself", "himself", "herself", "yourself"], a: 2, h: "Ona si to vzala na starosti 'sama'. Vyber tvar pro ≈æenu." }
    ], score: null },

    { id: 5, section: 'pronouns', title: "Exercise 5: Pronouns", questions: [
        { t: "Joanne put her shoes on the floor but ________ are in the cabinet.", o: ["my", "her", "he", "mine"], a: 3, h: "Boty pat≈ô√≠ mnƒõ (moje boty). Hledej tvar, kter√Ω stoj√≠ samostatnƒõ." },
        { t: "Peter kept the biscuits for ________ instead of sharing.", o: ["themselves", "itself", "himself", "herself"], a: 2, h: "Peter (on) si je nechal pro sebe 'sam√©ho'." },
        { t: "To disguise ________, Anthony wore a mask.", o: ["herself", "himself", "myself", "yourself"], a: 1, h: "Anthony (mu≈æ) maskoval 's√°m sebe'." },
        { t: "Would you have believed ________ if I told the truth?", o: ["me", "I", "he", "she"], a: 0, h: "Vƒõ≈ôili byste 'mnƒõ'? Hledej p≈ôedmƒõtov√Ω tvar z√°jmena 'I'." },
        { t: "All the employees ________ helped out in the project were given a rise.", o: ["who", "whom", "whose", "which"], a: 0, h: "Hled√°≈° vzta≈æn√© z√°jmeno pro lidi (kte≈ô√≠ pomohli)." },
        { t: "Mrs Dias gave each of ________ a lollipop.", o: ["he", "us", "her", "we"], a: 1, h: "Dala ho 'n√°m'. Hledej p≈ôedmƒõtov√Ω tvar z√°jmena 'we'." },
        { t: "The girl ________ father was involved in an accident is in hospital.", o: ["who", "whom", "which", "whose"], a: 3, h: "Hled√°≈° slovo 'jej√≠≈æ' (otec t√© d√≠vky)." },
        { t: "‚ÄúStay by the road if ________ do not want to be knocked down.‚Äù", o: ["they", "I", "you", "we"], a: 2, h: "Mluv√≠ k sest≈ôe (k tobƒõ). Kter√© z√°jmeno zvol√≠≈°?" },
        { t: "The fish were fresh so many people bought ________.", o: ["it", "them", "her", "him"], a: 1, h: "Lid√© si koupili 'je'. Hledej mno≈æn√© ƒç√≠slo p≈ôedmƒõtov√©ho tvaru." },
        { t: "Mr Andrews told us to submit ________ individual assignments.", o: ["their", "his", "our", "its"], a: 2, h: "Na≈°e √∫koly. Hledej tvar pro 'we' p≈ôed podstatn√Ωm jm√©nem." }
    ], score: null },

    { id: 6, section: 'pronouns', title: "Exercise 6: Pronouns", questions: [
        { t: "Ben and Joyce want to make ________ wedding grand.", o: ["he", "mine", "their", "ours"], a: 2, h: "Svatba pat≈ô√≠ jim. Kter√© slovo vyjad≈ôuje 'jejich'?" },
        { t: "‚ÄúThe flowers are lovely. Who sent ________?‚Äù", o: ["them", "it", "her", "him"], a: 0, h: "Kvƒõtiny jsou mno≈æn√© ƒç√≠slo. Kdo 'je' poslal?" },
        { t: "Mother will give Larry and ________ some money.", o: ["I", "me", "they", "he"], a: 1, h: "D√° pen√≠ze 'mnƒõ'. Hledej p≈ôedmƒõtov√Ω tvar z√°jmena 'I'." },
        { t: "‚ÄúThis is not my pen. Is it ________?‚Äù asked Mary.", o: ["you", "your", "mine", "yours"], a: 3, h: "Je to 'tvoje'? Hledej samostatnƒõ stoj√≠c√≠ p≈ôivlast≈àovac√≠ z√°jmeno." },
        { t: "‚ÄúTell ________ what happened,‚Äù said the officer.", o: ["we", "our", "us", "ours"], a: 2, h: "≈òeknƒõte to 'n√°m'. Hledej p≈ôedmƒõtov√Ω tvar pro 'we'." },
        { t: "The players congratulated ________ on their victory.", o: ["himself", "ourselves", "themselves", "herself"], a: 2, h: "Oni pogratulovali 'sami sobƒõ'." },
        { t: "The woman ________ son won the contest was very proud.", o: ["who", "whose", "whom", "which"], a: 1, h: "≈Ωena, 'jej√≠≈æ' syn vyhr√°l. Vyjad≈ôujeme vztah vlastnictv√≠." },
        { t: "‚ÄúI can‚Äôt find my keys. Have you seen ________?‚Äù", o: ["them", "it", "they", "their"], a: 0, h: "Kl√≠ƒçe jsou mno≈æn√© ƒç√≠slo. Vidƒõl jsi 'je'?" },
        { t: "‚ÄúWe must protect ________ from the cold.‚Äù", o: ["themselves", "himself", "ourselves", "yourself"], a: 2, h: "My (we) mus√≠me chr√°nit 'samy sebe'." },
        { t: "The bridge ________ was built last year has collapsed.", o: ["who", "whom", "which", "whose"], a: 2, h: "Most je vƒõc. Kter√© vzta≈æn√© z√°jmeno k nƒõmu pat≈ô√≠?" }
    ], score: null },

    { id: 7, section: 'pronouns', title: "Exercise 7: Pronouns", questions: [
        { t: "She was too fast for ________ (the guards).", o: ["her", "us", "him", "them"], a: 3, h: "Hledej p≈ôedmƒõtov√Ω tvar pro 'str√°≈æn√≠ky' (oni)." },
        { t: "‚ÄúIs this ________ bag?‚Äù asked the teacher.", o: ["your", "you", "mine", "yours"], a: 0, h: "Je to 'tvoje' ta≈°ka? Hledej tvar p≈ôed podstatn√Ωm jm√©nem." },
        { t: "The boy ________ is sitting there is my cousin.", o: ["which", "whose", "whom", "who"], a: 3, h: "Kuk, kter√Ω tam sed√≠. Hledej podmƒõt pro lidi." },
        { t: "‚ÄúI didn‚Äôt do it ________,‚Äù said the little girl.", o: ["herself", "themselves", "myself", "yourself"], a: 2, h: "J√° jsem to 'sama' neudƒõlala. Hledej tvar pro osobu 'I'." },
        { t: "The books ________ are on the table belong to the library.", o: ["which", "who", "whom", "whose"], a: 0, h: "Knihy jsou vƒõci. Kter√© vzta≈æn√© z√°jmeno zvol√≠≈°?" },
        { t: "‚ÄúDid you see ________?‚Äù asked the detective.", o: ["he", "they", "him", "we"], a: 2, h: "Vidƒõli jste 'ho'? Hledej p≈ôedmƒõtov√Ω tvar pro 'he'." },
        { t: "The house ________ roof was damaged has been repaired.", o: ["who", "whom", "whose", "which"], a: 2, h: "D≈Øm, 'jeho≈æ' st≈ôecha byla po≈°kozena." },
        { t: "‚ÄúWe should enjoy ________,‚Äù said the host.", o: ["ourselves", "yourselves", "themselves", "himself"], a: 0, h: "My (hostitel√© i host√©) se budeme bavit 'sami'." },
        { t: "‚ÄúGive ________ the book,‚Äù said the librarian.", o: ["her", "she", "they", "I"], a: 0, h: "Dejte 'j√≠' knihu. Hledej p≈ôedmƒõtov√Ω tvar pro 'she'." },
        { t: "The dog ________ was barking all night is now quiet.", o: ["which", "who", "whom", "whose"], a: 0, h: "Zv√≠≈ôe, kter√© ≈°tƒõkalo. Kter√© z√°jmeno pou≈æije≈°?" }
    ], score: null },

    { id: 8, section: 'pronouns', title: "Exercise 8: Pronouns", questions: [
        { t: "‚Äú________ are going to sign up without you,‚Äù the twins told Marie.", o: ["we", "she", "you", "I"], a: 0, h: "Dvojƒçata mluv√≠ za sebe (my). Jak√© z√°jmeno zvol√≠≈°?" },
        { t: "‚ÄúI will do it ________,‚Äù promised the boy.", o: ["herself", "themselves", "ourselves", "myself"], a: 3, h: "J√° to udƒõl√°m 's√°m'." },
        { t: "The car ________ crashed was a red one.", o: ["who", "whom", "which", "whose"], a: 2, h: "Auto je vƒõc. Kter√© vzta≈æn√© z√°jmeno k nƒõmu pat≈ô√≠?" },
        { t: "‚ÄúDid you meet ________?‚Äù asked my sister.", o: ["she", "her", "they", "he"], a: 1, h: "Potkal jsi 'ji'? Hledej p≈ôedmƒõtov√Ω tvar pro 'she'." },
        { t: "The girl ________ father is a doctor is in my class.", o: ["who", "whom", "which", "whose"], a: 3, h: "D√≠vka, 'jej√≠≈æ' otec je l√©ka≈ô." },
        { t: "‚ÄúWe must help ________,‚Äù said the coach.", o: ["themselves", "himself", "ourselves", "yourself"], a: 2, h: "My si mus√≠me pomoci 'sami'." },
        { t: "The students ________ passed the exam were very happy.", o: ["which", "who", "whom", "whose"], a: 1, h: "Lid√©, kte≈ô√≠ (kdo) udƒõlali zkou≈°ku." },
        { t: "‚ÄúIs this ________ umbrella?‚Äù", o: ["your", "you", "mine", "yours"], a: 0, h: "Je to 'tv≈Øj' de≈°tn√≠k? Hledej tvar p≈ôed vƒõc√≠." },
        { t: "‚ÄúTell ________ the truth,‚Äù said the judge.", o: ["he", "they", "him", "we"], a: 2, h: "≈òeknƒõte 'mu' pravdu. Hledej p≈ôedmƒõtov√Ω tvar pro 'he'." },
        { t: "The tree ________ fell down was very old.", o: ["who", "whom", "which", "whose"], a: 2, h: "Strom je vƒõc. Kter√© vzta≈æn√© z√°jmeno k nƒõmu pat≈ô√≠?" }
    ], score: null },

    { id: 9, section: 'pronouns', title: "Exercise 9: Pronouns", questions: [
        { t: "Alan and I completed the project ________.", o: ["themselves", "yourselves", "ourselves", "myself"], a: 2, h: "My jsme to udƒõlali 'sami'. Hledej tvar pro 'we'." },
        { t: "‚ÄúDo you want to come with ________?‚Äù", o: ["I", "me", "they", "he"], a: 1, h: "Chce≈° j√≠t 'se mnou'? Hledej p≈ôedmƒõtov√Ω tvar pro 'I'." },
        { t: "The woman ________ is talking to the principal is my mother.", o: ["which", "whose", "whom", "who"], a: 3, h: "Osoba, kter√° (kdo) mluv√≠." },
        { t: "‚ÄúIs this ________ seat?‚Äù asked the passenger.", o: ["your", "you", "mine", "yours"], a: 0, h: "Hled√°≈° 'va≈°e' sedadlo. Pou≈æij tvar p≈ôed vƒõc√≠." },
        { t: "The bird ________ was singing so sweetly has flown away.", o: ["which", "who", "whom", "whose"], a: 0, h: "Pt√°k je zv√≠≈ôe. Kter√© vzta≈æn√© z√°jmeno k nƒõmu pat≈ô√≠?" },
        { t: "‚ÄúDid you see ________?‚Äù asked the boy.", o: ["they", "he", "them", "we"], a: 2, h: "Vidƒõli jste 'je'? Hledej mno≈æn√© ƒç√≠slo p≈ôedmƒõtov√©ho tvaru." },
        { t: "The man ________ car was stolen reported it.", o: ["who", "whom", "whose", "which"], a: 2, h: "Mu≈æ, 'jeho≈æ' auto ukradli." },
        { t: "‚ÄúWe can do it ________,‚Äù said the children.", o: ["himself", "herself", "ourselves", "themselves"], a: 3, h: "Dƒõti to udƒõlaj√≠ 'sami'. Hledej tvar pro 'they'." },
        { t: "‚ÄúGive ________ the pencil,‚Äù said the teacher.", o: ["him", "he", "they", "I"], a: 0, h: "Dejte 'mu' tu≈æku. Hledej p≈ôedmƒõtov√Ω tvar pro 'he'." },
        { t: "The film ________ we watched was very exciting.", o: ["which", "who", "whom", "whose"], a: 0, h: "Film je vƒõc. Kter√© vzta≈æn√© z√°jmeno k nƒõmu pat≈ô√≠?" }
    ], score: null },

    { id: 10, section: 'pronouns', title: "Exercise 10: Pronouns", questions: [
        { t: "The computer ________ is a useless machine unless there are programmers.", o: ["herself", "themselves", "yourself", "itself"], a: 3, h: "Vƒõc sama o sobƒõ. Kter√© z√°jmeno na -self k n√≠ pat≈ô√≠?" },
        { t: "The man will go ________ to see the manager.", o: ["herself", "themselves", "himself", "yourself"], a: 2, h: "On tam p≈Øjde 's√°m'. Hledej tvar pro mu≈æe." },
        { t: "The building ________ was destroyed has been rebuilt.", o: ["which", "who", "whom", "whose"], a: 0, h: "Budova je vƒõc. Kter√© vzta≈æn√© z√°jmeno pou≈æije≈°?" },
        { t: "‚ÄúDid you find ________?‚Äù asked the woman.", o: ["they", "it", "he", "we"], a: 1, h: "Na≈°la jsi 'to' (ztracenou vƒõc)?" },
        { t: "The lady ________ husband is a pilot travels a lot.", o: ["who", "whom", "which", "whose"], a: 3, h: "D√°ma, 'jej√≠≈æ' man≈æel je pilot." },
        { t: "‚ÄúWe must behave ________,‚Äù said the mother.", o: ["himself", "herself", "ourselves", "yourselves"], a: 3, h: "Mluv√≠ k dƒõtem. Mus√≠te se chovat 'sami' slu≈°nƒõ." },
        { t: "The people ________ live next door are very friendly.", o: ["which", "who", "whom", "whose"], a: 1, h: "Lid√©, kte≈ô√≠ (kdo) ≈æij√≠ vedle." },
        { t: "‚ÄúIs this ________ notebook?‚Äù asked the student.", o: ["your", "you", "mine", "yours"], a: 0, h: "Tv≈Øj se≈°it. Hledej tvar p≈ôed podstatn√Ωm jm√©nem." },
        { t: "‚ÄúTell ________ the story,‚Äù said the child.", o: ["he", "they", "her", "I"], a: 2, h: "≈òekni 'j√≠' ten p≈ô√≠bƒõh. Hledej p≈ôedmƒõtov√Ω tvar pro 'she'." },
        { t: "The river ________ flows through the city is very polluted.", o: ["who", "whom", "which", "whose"], a: 2, h: "≈òeka je vƒõc. Kter√© vzta≈æn√© z√°jmeno zvol√≠≈°?" }
    ], score: null },

    { id: 11, section: 'adverbs', title: "Exercise 11: Adverbs", questions: [
        { t: "You will be fired if you are ________ absent.", o: ["seldom", "rarely", "barely", "often"], a: 3, h: "Hledej slovo pro vysokou ƒçetnost (ƒçasto)." },
        { t: "It is wrong to steal. You must ________ do it again.", o: ["seldom", "rarely", "hardly", "never"], a: 3, h: "Jak ƒçasto se maj√≠ dƒõlat ≈°patn√© vƒõci? (nikdy)." },
        { t: "My grandmother is ________ ill.", o: ["rarely", "hardly", "seriously", "barely"], a: 2, h: "Kter√© slovo popisuje velkou m√≠ru nemoci? (v√°≈ænƒõ)." },
        { t: "To cross the road ________, use the bridge.", o: ["safely", "bravely", "fiercely", "dangerously"], a: 0, h: "Hledej zp≈Øsob, kter√Ω tƒõ ochr√°n√≠ p≈ôed nehodou (bezpeƒçnƒõ)." },
        { t: "He could ________ swallow.", o: ["easily", "hardly", "luckily", "sibilantly"], a: 1, h: "Kter√© p≈ô√≠slovce vyjad≈ôuje, ≈æe se nƒõco dƒõje 'stƒõ≈æ√≠'?" },
        { t: "The soldiers fought ________.", o: ["bravely", "cowardly", "slowly", "weakly"], a: 0, h: "Jak bojuj√≠ odv√°≈æn√≠ voj√°ci? (stateƒçnƒõ)." },
        { t: "The wind blew so ________ that trees were uprooted.", o: ["softly", "gently", "strongly", "weakly"], a: 2, h: "Hledej slovo vyjad≈ôuj√≠c√≠ velkou s√≠lu." },
        { t: "My sister speaks so ________ I can hardly hear.", o: ["loudly", "softly", "clearly", "quickly"], a: 1, h: "Jak mluv√≠ nƒõkdo, koho t√©mƒõ≈ô nesly≈°√≠≈°? (potichu)." },
        { t: "The tortoise moves ________.", o: ["fast", "quickly", "slowly", "rapidly"], a: 2, h: "Jak√Ω je typick√Ω pohyb ≈æelvy? (pomalu)." },
        { t: "The children played ________ in the park.", o: ["sadly", "happily", "angrily", "quietly"], a: 1, h: "Jak si dƒõti hraj√≠, kdy≈æ maj√≠ radost? (≈°≈•astnƒõ)." }
    ], score: null },

    { id: 12, section: 'adverbs', title: "Exercise 12: Adverbs", questions: [
        { t: "The students behaved ________ during the trip.", o: ["badly", "well", "good", "rough"], a: 1, h: "Hledej p≈ô√≠slovce od slova 'good'. Pozor, je nepravideln√©!" },
        { t: "She speaks English ________ after living in London.", o: ["fluently", "fluent", "slow", "bad"], a: 0, h: "Hledej p≈ô√≠slovce s koncovkou -ly (plynule)." },
        { t: "It rained ________ through the night.", o: ["lightly", "heavily", "softly", "gently"], a: 1, h: "Siln√Ω d√©≈°≈• je v angliƒçtinƒõ 'tƒõ≈æk√Ω'." },
        { t: "Drive ________ when roads are slippery.", o: ["fast", "carefully", "careless", "quick"], a: 1, h: "Jak m√°≈° ≈ô√≠dit na kluzk√© silnici? (opatrnƒõ)." },
        { t: "The thief entered ________ not to wake anyone.", o: ["loudly", "noisily", "quietly", "quickly"], a: 2, h: "Jak se pohybuje zlodƒõj? (potichu)." },
        { t: "He solved the math problem ________.", o: ["easily", "hard", "difficult", "slow"], a: 0, h: "Pokud jsi ≈°ikovn√Ω, vy≈ôe≈°√≠≈° √∫kol bez n√°mahy (snadno)." },
        { t: "The sun is shining ________ today.", o: ["brightly", "dimly", "softly", "weakly"], a: 0, h: "Jak sv√≠t√≠ slunce za kr√°sn√©ho dne? (jasnƒõ)." },
        { t: "She waited ________ for her turn.", o: ["impatiently", "patiently", "quick", "fast"], a: 1, h: "Jak ƒçek√°≈°, kdy≈æ m√°≈° dost ƒçasu a nezlob√≠≈° se? (trpƒõlivƒõ)." },
        { t: "The dog barked ________ at the stranger.", o: ["softly", "quietly", "loudly", "gently"], a: 2, h: "Jak ≈°tƒõk√° pes na cizince? (nahlas)." },
        { t: "He finished homework ________ to go play.", o: ["slowly", "quickly", "lazy", "late"], a: 1, h: "Jak mus√≠≈° pracovat, abys √∫kol stihl rychle?" }
    ], score: null },

    { id: 13, section: 'adverbs', title: "Exercise 13: Adverbs", questions: [
        { t: "The passengers waited ________ for the flight.", o: ["anxiously", "happily", "excitedly", "calmly"], a: 0, h: "Jak ƒçek√°≈°, kdy≈æ m√°≈° obavy? (neklidnƒõ/√∫zkostnƒõ)." },
        { t: "The teacher shouted ________ at noisy students.", o: ["softly", "gently", "angrily", "kindly"], a: 2, h: "Jak k≈ôiƒç√≠ rozzloben√Ω uƒçitel? (na≈°tvanƒõ)." },
        { t: "He works ________ to support his family.", o: ["hardly", "hard", "lazy", "slow"], a: 1, h: "Pozor! Hledej slovo pro 'tvrdƒõ pracovat'. Nenech se zm√°st koncovkou -ly." },
        { t: "The ballerina danced ________.", o: ["gracefully", "clumsily", "heavily", "noisily"], a: 0, h: "Jak se pohybuje taneƒçnice? (p≈Øvabnƒõ)." },
        { t: "Write your name ________ at the top.", o: ["messy", "neatly", "dirty", "careless"], a: 1, h: "Jak m√°≈° ps√°t sv√© jm√©no? (√∫hlednƒõ)." },
        { t: "The fire spread ________.", o: ["slowly", "rapidly", "gradually", "softly"], a: 1, h: "Jak se ≈°√≠≈ô√≠ ohe≈à v such√©m lese? (velmi rychle)." },
        { t: "She smiled ________ when she got flowers.", o: ["sadly", "sweetly", "angrily", "meanly"], a: 1, h: "Jak√Ω √∫smƒõv vƒõnuje≈° nƒõkomu za kytici? (mile)." },
        { t: "The old man walked ________ down the street.", o: ["quickly", "fast", "shakily", "strongly"], a: 2, h: "Jak se pohybuje nƒõkdo s nejistou ch≈Øz√≠? (rozt≈ôesenƒõ)." },
        { t: "The bird sang ________ on the branch.", o: ["beautifully", "terribly", "loudly", "noisily"], a: 0, h: "Jak zp√≠vaj√≠ pt√°ƒçci pro radost? (kr√°snƒõ)." },
        { t: "You must answer the questions ________.", o: ["correctly", "wrong", "false", "bad"], a: 0, h: "Hledej p≈ô√≠slovce pro 'spr√°vnƒõ'." }
    ], score: null },

    { id: 14, section: 'revision', title: "Exercise 14: Revision", questions: [
        { t: "This is the house ________ my grandfather built.", o: ["who", "whom", "which", "whose"], a: 2, h: "D≈Øm je vƒõc. Kter√© vzta≈æn√© z√°jmeno zvol√≠≈°?" },
        { t: "The students ________ were late had detention.", o: ["which", "who", "whom", "whose"], a: 1, h: "Lid√©, kte≈ô√≠ (kdo) p≈ôi≈°li pozdƒõ." },
        { t: "‚ÄúIs this ________ book?‚Äù asked the teacher.", o: ["your", "yours", "you", "mine"], a: 0, h: "Tvoje kniha. Hledej tvar p≈ôed vƒõc√≠." },
        { t: "The cat licked ________ paws.", o: ["it", "its", "it's", "them"], a: 1, h: "Hled√°≈° p≈ôivlastnƒõn√≠ (jeho/jej√≠) bez apostrofu." },
        { t: "My mother and ________ went to the market.", o: ["me", "I", "us", "they"], a: 1, h: "Hled√°≈° podmƒõt. Zkus si ≈ô√≠ct: 'Maminka a ___'." },
        { t: "The man ________ car was stolen is at the station.", o: ["who", "whom", "which", "whose"], a: 3, h: "Mu≈æ, 'jeho≈æ' auto ukradli. Vyjad≈ôuje≈° vlastnictv√≠." },
        { t: "She did the project by ________.", o: ["herself", "himself", "myself", "yourself"], a: 0, h: "Ona (she) to udƒõlala √∫plnƒõ sama." },
        { t: "The cake was ________ delicious that everyone wanted more.", o: ["very", "so", "too", "enough"], a: 1, h: "Vazba pro zd≈Øraznƒõn√≠: 'tak ... ≈æe'." },
        { t: "He ran ________ to catch the bus.", o: ["slow", "fast", "quick", "rapidly"], a: 1, h: "Hledej slovo pro 'rychle'. Pozor, toto slovo je stejn√© i jako p≈ô√≠davn√© jm√©no." },
        { t: "The dress ________ she is wearing is expensive.", o: ["who", "whose", "which", "whom"], a: 2, h: "≈†aty jsou vƒõc. Kter√© vzta≈æn√© z√°jmeno zvol√≠≈°?" }
    ], score: null },

    { id: 15, section: 'revision', title: "Exercise 15: Revision", questions: [
        { t: "The person ________ you need to see is in a meeting.", o: ["who", "whom", "which", "whose"], a: 1, h: "Hled√°≈° osobu, 'koho' m√°≈° vidƒõt." },
        { t: "‚ÄúI don't have my pen. Can I borrow ________?‚Äù", o: ["your", "yours", "you", "mine"], a: 1, h: "P≈Øjƒçit si 'tu tvoji'. Hledej tvar, kter√Ω stoj√≠ s√°m." },
        { t: "The dog wagged ________ tail.", o: ["its", "it's", "it", "their"], a: 0, h: "Hledej p≈ôivlastnƒõn√≠ pro zv√≠≈ôe bez apostrofu." },
        { t: "My friends and ________ are planning a party.", o: ["me", "I", "us", "them"], a: 1, h: "Hled√°≈° podmƒõt. Kdo to pl√°nuje?" },
        { t: "The building ________ was destroyed was rebuilt.", o: ["who", "whose", "whom", "which"], a: 3, h: "Budova je vƒõc. Kter√© z√°jmeno k n√≠ pat≈ô√≠?" },
        { t: "He hurt ________ playing football.", o: ["himself", "herself", "itself", "themselves"], a: 0, h: "On zranil 's√°m sebe'." },
        { t: "The woman ________ son is an actor is visiting.", o: ["who", "whom", "which", "whose"], a: 3, h: "≈Ωena, 'jej√≠≈æ' syn je slavn√Ω." },
        { t: "She sang ________ during the concert.", o: ["beautiful", "beautifully", "beauty", "beautify"], a: 1, h: "Zp√≠vala 'jak'? Hledej p≈ô√≠slovce s koncovkou -ly." },
        { t: "This is the ________ book I have ever read.", o: ["good", "better", "best", "goodest"], a: 2, h: "Hled√°≈° 3. stupe≈à (nejlep≈°√≠). Pozor, je nepravideln√Ω!" },
        { t: "The computer ________ I bought yesterday is fast.", o: ["who", "whom", "which", "whose"], a: 2, h: "Poƒç√≠taƒç je vƒõc. Kter√© z√°jmeno zvol√≠≈°?" }
    ], score: null },

    { id: 16, section: 'revision', title: "Exercise 16: Revision", questions: [
        { t: "The student ________ won is hardworking.", o: ["who", "whom", "which", "whose"], a: 0, h: "Osoba, kter√° (kdo) vyhr√°la." },
        { t: "‚ÄúIs this ________ umbrella?‚Äù", o: ["your", "you", "yours", "mine"], a: 0, h: "V√°≈° de≈°tn√≠k. Hledej tvar p≈ôed vƒõc√≠." },
        { t: "The tree lost all ________ leaves.", o: ["its", "it's", "it", "their"], a: 0, h: "Hledej p≈ôivlastnƒõn√≠ (jeho) bez apostrofu." },
        { t: "Jack and ________ went fishing.", o: ["me", "I", "us", "him"], a: 1, h: "Hled√°≈° podmƒõt. Kdo tam ≈°el?" },
        { t: "The movie ________ we watched was boring.", o: ["who", "whose", "whom", "which"], a: 3, h: "Film je vƒõc. Kter√© z√°jmeno zvol√≠≈°?" },
        { t: "We should learn to take care of ________.", o: ["himself", "ourselves", "themselves", "herself"], a: 1, h: "My o 'samy sebe'. Hledej tvar na -selves pro 'we'." },
        { t: "The boy ________ bicycle was stolen is upset.", o: ["who", "whom", "which", "whose"], a: 3, h: "Chlapec, 'jeho≈æ' kolo zmizelo." },
        { t: "He answered the questions ________.", o: ["correct", "correctly", "correction", "corrected"], a: 1, h: "Odpovƒõdƒõl 'jak'? Hledej p≈ô√≠slovce s koncovkou -ly." },
        { t: "She is the ________ girl in school.", o: ["pretty", "prettier", "prettiest", "most pretty"], a: 2, h: "Hled√°≈° 3. stupe≈à (nejhezƒç√≠). Nezapome≈à na koncovku -iest." },
        { t: "The car ________ he is driving belongs to his father.", o: ["who", "whose", "which", "whom"], a: 2, h: "Auto je vƒõc. Kter√© z√°jmeno zvol√≠≈°?" }
    ], score: null },

    { id: 17, section: 'revision', title: "Exercise 17: Revision", questions: [
        { t: "The doctor ________ treated my father is experienced.", o: ["who", "whom", "which", "whose"], a: 0, h: "L√©ka≈ô, kter√Ω (kdo) l√©ƒçil tv√©ho t√°tu." },
        { t: "‚ÄúIt must be ________,‚Äù said Peter.", o: ["her", "hers", "she", "mine"], a: 1, h: "Hledej samostatnƒõ stoj√≠c√≠ tvar pro 'jej√≠'." },
        { t: "The bird built ________ nest high up.", o: ["its", "it's", "it", "their"], a: 0, h: "Hledej tvar 'jeho' bez apostrofu." },
        { t: "My brother and ________ enjoyed the concert.", o: ["me", "I", "us", "they"], a: 1, h: "Hled√°≈° podmƒõt. Kdo tam byl?" },
        { t: "The book ________ I am reading is interesting.", o: ["who", "whose", "whom", "which"], a: 3, h: "Kniha je vƒõc. Kter√© z√°jmeno k n√≠ pat≈ô√≠?" },
        { t: "Children enjoyed ________ at the park.", o: ["himself", "ourselves", "themselves", "herself"], a: 2, h: "Dƒõti si to u≈æily 'sami'. Hledej tvar pro 'they'." },
        { t: "The teacher ________ students won was proud.", o: ["who", "whom", "which", "whose"], a: 3, h: "Uƒçitelka, 'jej√≠≈æ' ≈æ√°ci vyhr√°li." },
        { t: "She speaks French ________.", o: ["fluent", "fluently", "fluency", "fluented"], a: 1, h: "Mluv√≠ 'jak'? Hledej p≈ô√≠slovce s koncovkou -ly." },
        { t: "He is ________ than his brother.", o: ["tall", "taller", "tallest", "more tall"], a: 1, h: "Srovn√°v√°≈° dva lidi. Pou≈æij koncovku -er." },
        { t: "The house ________ they live in is large.", o: ["who", "whose", "which", "whom"], a: 2, h: "D≈Øm je vƒõc. Kter√© z√°jmeno zvol√≠≈°?" }
    ], score: null },

    { id: 18, section: 'revision', title: "Exercise 18: Revision", questions: [
        { t: "The man ________ police are looking for escaped.", o: ["who", "whom", "which", "whose"], a: 1, h: "Hled√°≈° osobu, 'koho' hledaj√≠. Pou≈æij p≈ôedmƒõtov√Ω tvar." },
        { t: "The man ________ had come up was Victoria's friend.", o: ["whom", "who", "which", "whose"], a: 1, h: "Mu≈æ, kter√Ω (kdo) p≈ôi≈°el. Hled√°≈° podmƒõt pro lidi." },
        { t: "Take the ________ packet of rice.", o: ["small", "as small", "smallest", "smaller"], a: 0, h: "Hled√°≈° z√°kladn√≠ tvar p≈ô√≠davn√©ho jm√©na." },
        { t: "My family and ________ go to church.", o: ["they", "me", "I", "us"], a: 2, h: "Hled√°≈° podmƒõt. Kdo tam jde?" },
        { t: "The prefect let Peter and ________ in.", o: ["me", "I", "her", "they"], a: 0, h: "Po slovesu 'let' pou≈æij p≈ôedmƒõtov√Ω tvar (mƒõ)." },
        { t: "‚Äú________ have only 30 seconds,‚Äù said the host.", o: ["I", "we", "you", "they"], a: 2, h: "Oslovuje≈° druhou osobu (v√°s)." },
        { t: "The sound ________ you had heard was scary.", o: ["which", "whom", "whose", "who"], a: 0, h: "Zvuk je vƒõc. Kter√© z√°jmeno k nƒõmu pat≈ô√≠?" },
        { t: "They were ________ amazing.", o: ["strongly", "truly", "fairly", "adequately"], a: 1, h: "Hledej slovo pro 'opravdu/skuteƒçnƒõ'." },
        { t: "The station had ________ shown the public life.", o: ["never", "seldom", "rarely", "once"], a: 0, h: "Hledej slovo vyjad≈ôuj√≠c√≠ nulovou ƒçetnost (nikdy)." },
        { t: "The older you get, the ________ it is.", o: ["difficult", "more difficult", "most difficult", "as difficult"], a: 1, h: "P≈ôi srovn√°vac√≠ vazbƒõ 'The older..., the ___' pou≈æij 2. stupe≈à." }
    ], score: null }
];

allExercises.sort((a, b) => a.id - b.id);
let currentIdx = 0;

function changeSection(sec) {
    document.querySelectorAll('.sec-btn').forEach(b => b.classList.remove('active'));
    const btnId = 'sec-' + sec;
    const activeBtn = document.getElementById(btnId);
    if (activeBtn) activeBtn.classList.add('active');

    document.getElementById('quiz-view').style.display = 'block';
    document.getElementById('check-btn-area').style.display = 'block';
    document.getElementById('dashboard-view').style.display = 'none';
    document.getElementById('exercise-nav').style.display = 'flex';

    const firstInSec = allExercises.findIndex(e => e.section === sec);
    if (firstInSec !== -1) showEx(firstInSec);
}

function renderSelector() {
    const nav = document.getElementById('exercise-nav');
    nav.innerHTML = '';
    const currentSectionType = allExercises[currentIdx].section;
    
    allExercises.forEach((ex, i) => {
        if (ex.section === currentSectionType) {
            const b = document.createElement('button');
            b.className = `ex-btn ${i === currentIdx ? 'active' : ''} ${ex.score !== null ? 'done' : ''}`;
            b.textContent = ex.id;
            b.onclick = () => showEx(i);
            nav.appendChild(b);
        }
    });
}

function showEx(idx) {
    currentIdx = idx;
    renderSelector();
    const area = document.getElementById('quiz-view');
    const ex = allExercises[idx];
    area.innerHTML = `<h2>${ex.title}</h2>`;
    
    ex.questions.forEach((q, qi) => {
        area.innerHTML += `
            <div class="question-card" id="card-${idx}-${qi}">
                <button class="hint-btn" onclick="toggleHint(${idx},${qi})">Hint üí°</button>
                <div class="q-text">${qi + 1}. ${q.t}</div>
                <div class="hint-box" id="hint-${idx}-${qi}">${q.h}</div>
                <div class="options">
                    ${q.o.map((opt, oi) => `<label>
                        <input type="radio" name="e${idx}q${qi}" value="${oi}"> ${opt}
                    </label>`).join('')}
                </div>
                <div class="feedback" id="feed-${idx}-${qi}"></div>
            </div>`;
    });
}

function toggleHint(exIdx, qIdx) {
    const box = document.getElementById(`hint-${exIdx}-${qIdx}`);
    if (box) box.style.display = box.style.display === 'block' ? 'none' : 'block';
}

function checkEx() {
    const ex = allExercises[currentIdx];
    let s = 0;
    ex.questions.forEach((q, qi) => {
        const sel = document.querySelector(`input[name="e${currentIdx}q${qi}"]:checked`);
        const feed = document.getElementById(`feed-${currentIdx}-${qi}`);
        const card = document.getElementById(`card-${currentIdx}-${qi}`);
        
        if (feed) feed.style.display = 'block';
        if (sel && parseInt(sel.value) === q.a) {
            s++;
            if (card) card.style.borderColor = 'var(--success)';
            if (feed) { feed.innerHTML = "Correct! ‚úÖ"; feed.style.color = "var(--success)"; }
        } else {
            if (card) card.style.borderColor = 'var(--error)';
            if (feed) { feed.innerHTML = `Wrong! Correct: ${q.o[q.a]} ‚ùå`; feed.style.color = "var(--error)"; }
        }
    });
    ex.score = s;
    renderSelector();
}

function showDashboard() {
    document.getElementById('quiz-view').style.display = 'none';
    document.getElementById('check-btn-area').style.display = 'none';
    document.getElementById('exercise-nav').style.display = 'none';
    const dashView = document.getElementById('dashboard-view');
    dashView.style.display = 'block';
    
    const grid = document.getElementById('dash-grid');
    grid.innerHTML = '';
    let total = 0;
    let completed = 0;

    allExercises.forEach(ex => {
        const card = document.createElement('div');
        card.className = `stat-card ${ex.score >= 8 ? 'good' : ''}`;
        card.innerHTML = `<strong>Ex ${ex.id}</strong><br>${ex.score !== null ? ex.score : '-'} / 10`;
        grid.appendChild(card);
        if (ex.score !== null) { total += ex.score; completed++; }
    });
    
    document.getElementById('total-score-text').textContent = `Total Score: ${total} / 180`;
    if (completed === allExercises.length) {
        document.getElementById('certificate').style.display = 'block';
    }
}

changeSection('pronouns');
</script>
</body>
</html>
